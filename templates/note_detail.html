{% extends "base.html" %}

{% block title %}{{ note.title }} - VibeNotes{% endblock %}

{% block content %}
<div class="note-detail-container">
		<div class="note-detail-box">
				<div class="note-detail-header">
						<h2>{{ note.title }}</h2>
						<div class="note-detail-meta">
								<span class="meta-item">Created: {{ note.created_at.strftime('%B %d, %Y at %I:%M %p') }}</span>
								{% if note.updated_at != note.created_at %}
										<span class="meta-item">Updated: {{ note.updated_at.strftime('%B %d, %Y at %I:%M %p') }}</span>
								{% endif %}
						</div>
				</div>
				
				<div class="note-detail-content">
						{% if note.content %}
								<div class="note-content-display">
										{{ note.content|replace('\n', '<br>')|safe }}
								</div>
						{% else %}
								<p class="no-content">This note has no content.</p>
						{% endif %}
				</div>
				
				{% if attachments %}
				<div class="attachments-section">
						<h3>Attachments</h3>
						<div class="attachments-list">
								{% for attachment in attachments %}
										<div class="attachment-item">
												<div class="attachment-info">
														<span class="attachment-icon">ðŸ“Ž</span>
														<div class="attachment-details">
																<a href="{{ url_for('download_attachment', attachment_id=attachment.id) }}" class="attachment-name">
																		{{ attachment.original_filename }}
																</a>
																<span class="attachment-meta">
																		{{ (attachment.file_size / 1024)|round(1) }} KB Â· {{ attachment.uploaded_at.strftime('%b %d, %Y') }}
																</span>
														</div>
												</div>
												<form method="POST" action="{{ url_for('delete_attachment', attachment_id=attachment.id) }}" style="display: inline;" onsubmit="return confirm('Delete this attachment?');">
														<button type="submit" class="btn-icon-delete" title="Delete attachment">âœ•</button>
												</form>
										</div>
								{% endfor %}
						</div>
				</div>
				{% endif %}
				
				<div class="note-detail-actions">
						{% if is_owner %}
								<a href="{{ url_for('edit_note', note_id=note.id) }}" class="btn btn-primary">Edit Note</a>
								<form method="POST" action="{{ url_for('delete_note', note_id=note.id) }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this note? This action cannot be undone.');">
										<button type="submit" class="btn btn-danger">Delete Note</button>
								</form>
						{% endif %}
						<a href="{{ url_for('notes') }}" class="btn btn-secondary">{% if is_owner %}Back to Notes{% else %}Back{% endif %}</a>
				</div>
		</div>
</div>
{% endblock %}

